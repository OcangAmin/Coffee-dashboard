<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kasir Nasi Kuning 51</title>

<style>
body{font-family:Arial;background:#f5f5f5;margin:0}
.container{max-width:420px;margin:auto;padding:10px}
.header{background:#ffb703;padding:14px;border-radius:14px;text-align:center;font-size:20px;font-weight:bold}
.menu-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:10px}
.menu-btn{background:#fff;border:none;padding:10px;border-radius:10px;box-shadow:0 2px 4px rgba(0,0,0,.1);font-weight:600}
.cart,.summary,.history,.rekap{background:#fff;border-radius:12px;padding:10px;margin-top:10px}
.cart-item{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
.cart-item button{background:#e63946;color:#fff;border:none;border-radius:6px;padding:4px 6px}
input{width:100%;padding:8px;border-radius:8px;border:1px solid #ccc}
.pay-btn{width:100%;padding:10px;margin-top:6px;border:none;border-radius:10px;font-weight:bold}
.cash{background:#2a9d8f;color:#fff}
.qris{background:#0077b6;color:#fff}
.save{background:#6a4c93;color:#fff}
.file{background:#457b9d;color:#fff}
.danger{background:#dc3545;color:#fff}
.history-item{font-size:13px;border-bottom:1px solid #eee;padding:6px 0}
</style>
</head>

<body>
<div class="container">

<div class="header">üçõ KASIR NASI KUNING 51</div>

<div class="menu-grid">
<button class="menu-btn" onclick="addItem('Ikan',5000)">Ikan<br>Rp5.000</button>
<button class="menu-btn" onclick="addItem('Bakwan',2000)">Bakwan<br>Rp2.000</button>
<button class="menu-btn" onclick="addItem('Nasi',5000)">Nasi<br>Rp5.000</button>
<button class="menu-btn" onclick="addItem('Telur',5000)">Telur<br>Rp5.000</button>
<button class="menu-btn" onclick="addItem('Ayam',5000)">Ayam<br>Rp5.000</button>
<button class="menu-btn" onclick="addItem('NK Ayam',15000)">NK Ayam<br>Rp15.000</button>
<button class="menu-btn" onclick="addItem('NK Ikan',13000)">NK Ikan<br>Rp13.000</button>
<button class="menu-btn" onclick="addItem('NK Telur',10000)">NK Telur<br>Rp10.000</button>
<button class="menu-btn" onclick="addItem('NK Ayam Telur',23000)">NK Ayam Telur<br>Rp23.000</button>
<button class="menu-btn" onclick="addItem('NK Ikan Telur',20000)">NK Ikan Telur<br>Rp20.000</button>
<button class="menu-btn" onclick="addItem('Air Mineral',5000)">Air<br>Rp5.000</button>
</div>

<div class="cart" id="cart"></div>

<div class="summary">
<div><b>Total:</b> Rp <span id="total">0</span></div>
<input type="number" id="bayar" placeholder="Nominal Bayar">
<div><b>Kembalian:</b> Rp <span id="kembali">0</span></div>
<div><b>Metode:</b> <span id="metode">-</span></div>

<button class="pay-btn cash" onclick="setMetode('Cash')">üíµ Cash</button>
<button class="pay-btn qris" onclick="setMetode('QRIS')">üì± QRIS</button>

<button class="pay-btn save" onclick="simpanKeHistori()">üßæ Simpan ke Histori</button>
<button class="pay-btn file" onclick="simpanKeFile()">üìÑ Simpan ke File</button>
<button class="pay-btn danger" onclick="hapusSemuaData()">üóëÔ∏è Hapus Semua Data</button>
</div>

<div class="rekap">
<b>üìä Rekap Omzet Hari Ini</b>
<div>Total Transaksi: <span id="rekapJumlah">0</span></div>
<div>Total Omzet: Rp <span id="rekapOmzet">0</span></div>
<div>Total Kembalian: Rp <span id="rekapKembali">0</span></div>
</div>

<div class="history">
<b>Histori Transaksi</b>
<div id="histori"></div>
</div>

</div>

<script>
let cart=[],total=0,metode="",transaksiTerakhir=null;
const cartEl=document.getElementById("cart");
const totalEl=document.getElementById("total");
const bayarEl=document.getElementById("bayar");
const kembaliEl=document.getElementById("kembali");
const metodeEl=document.getElementById("metode");
const historiEl=document.getElementById("histori");

function addItem(n,h){cart.push({n,h});total+=h;renderCart();}
function renderCart(){
cartEl.innerHTML="";
cart.forEach((i,x)=>{
cartEl.innerHTML+=`<div class="cart-item">${i.n} - Rp${i.h}<button onclick="hapusItem(${x})">‚úï</button></div>`;
});
totalEl.innerText=total;
}
function hapusItem(i){total-=cart[i].h;cart.splice(i,1);renderCart();}
bayarEl.oninput=()=>kembaliEl.innerText=Math.max(0,bayarEl.value-total);
function setMetode(m){metode=m;metodeEl.innerText=m;}

function simpanKeHistori(){
if(!total||!bayarEl.value||!metode)return alert("Lengkapi transaksi");
let kembali=bayarEl.value-total;
if(kembali<0)return alert("Uang kurang");

let data={
waktu:new Date().toLocaleString("id-ID"),
kasir:"Nasi Kuning 51",
total:total,
bayar:Number(bayarEl.value),
kembali:kembali,
metode:metode
};

let h=JSON.parse(localStorage.getItem("historiKasir"))||[];
h.push(data);
localStorage.setItem("historiKasir",JSON.stringify(h));

transaksiTerakhir=data;
reset();
tampilkanHistori();
hitungRekap();
alert("Transaksi disimpan ke histori");
}

function simpanKeFile(){
if(!transaksiTerakhir)return alert("Belum ada transaksi untuk disimpan ke file");
let d=transaksiTerakhir;
let isi=`Kasir: ${d.kasir}
Tanggal: ${d.waktu}

Total: Rp${d.total}
Bayar: Rp${d.bayar}
Kembalian: Rp${d.kembali}
Metode: ${d.metode}`;
let b=new Blob([isi],{type:"text/plain"});
let a=document.createElement("a");
a.href=URL.createObjectURL(b);
a.download="transaksi_"+Date.now()+".txt";
a.click();
}

function reset(){
cart=[];total=0;
cartEl.innerHTML="";
totalEl.innerText=0;
bayarEl.value="";
kembaliEl.innerText=0;
metodeEl.innerText="-";
metode="";
}

function tampilkanHistori(){
historiEl.innerHTML="";
let h=JSON.parse(localStorage.getItem("historiKasir"))||[];
h.forEach(i=>{
historiEl.innerHTML+=`<div class="history-item">${i.waktu}<br>Rp${i.total} | ${i.metode} | Kembali Rp${i.kembali}</div>`;
});
}

function hitungRekap(){
let h=JSON.parse(localStorage.getItem("historiKasir"))||[];
let hari=new Date().toLocaleDateString("id-ID");
let j=0,o=0,k=0;
h.forEach(i=>{
if(i.waktu.split(",")[0]===hari){j++;o+=i.total;k+=i.kembali;}
});
rekapJumlah.innerText=j;
rekapOmzet.innerText=o;
rekapKembali.innerText=k;
}

function hapusSemuaData(){
if(confirm("Hapus semua data?")){
localStorage.clear();
reset();
tampilkanHistori();
hitungRekap();
}}
tampilkanHistori();
hitungRekap();
</script>

</body>
</html>
